{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2>Résultats de la sélection d'attributs</h2>

    {% if error_message %}
    <div class="alert alert-danger" role="alert">
        {{ error_message }}
    </div>
    {% else %}
    <p>Dataset : {{ dataset.name }}</p>
    <p>Algorithme : {{ algorithm }}</p>
    <p>Nombre d'attributs sélectionnés : {{ num_features }}</p>

    <table class="table">
        <thead>
            <tr>
                <th>Attribut</th>
                <th>Importance (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for feature, importance in selected_features %}
            <tr>
                <td>{{ feature }}</td>
                <td>{{ importance|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form id="returnForm" method="get" action="{% url 'create_model_algo' %}">
    <input type="hidden" name="dataset" value="{{ dataset.id }}">
    <input type="hidden" name="model_name" value="{{ model_name }}">
    <input type="hidden" name="action" value="feature_selection">
    {% for feature, importance in selected_features %}
    <input type="hidden" name="selected_columns" value="{{ feature }}">
    {% endfor %}
    <button type="submit" class="btn btn-primary">Retour à la création du modèle</button>
</form>


    <a href="{% url 'feature_selection' %}" class="btn btn-primary">Retour à un autre algorithme</a>

    {% endif %}
</div>
{% endblock %}
